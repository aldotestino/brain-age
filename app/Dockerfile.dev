FROM node:20

ARG DATABASE_URL
ENV NEXT_TELEMETRY_DISABLED 1

WORKDIR /usr/app

COPY package.json ./
COPY yarn.lock ./
RUN yarn
COPY . .

RUN chmod +x ./build_run.sh

CMD ./build_run.sh
